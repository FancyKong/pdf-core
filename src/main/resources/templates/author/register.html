<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Cherish">
    <title>著作者申请</title>
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"/>

    <!--common-->
    <link href="/css/style.css" rel="stylesheet">
    <link href="/css/style-responsive.css" rel="stylesheet">

    <script src="/js/jquery-1.12.4.js" type="text/javascript"></script>
    <style>
        body{
            background-color: #fff;
        }
        .error{
            border: #e9151c;
        }
        .help-block{
            color: #e9151c;
        }
        #authorForm {
            margin: 0 50px;
        }
    </style>
</head>

<body>

<div class="container">
    <div style="height: 25px;"></div>

    <div class="row">
        <section class="panel">
            <header class="panel-heading">
                <div class="text-center">
                    <img src="/images/logo.png" alt="LOGO"/>
                </div>
            </header>
            <div class="panel-body">
                <h3 class="text-center">填写著作者申请信息</h3>
                <br>
                <br>

                <form id="authorForm" class="form-horizontal "
                      action="/author/register" method="post">
                    <!-- /*姓名、性别、出生年、电话、籍贯、单位、学历、职称、职务、邮箱*/ -->
                    <fieldset title="基本信息">

                        <div class="form-group">
                            <div class="col-sm-4">
                                <label for="nickname">姓名：</label>
                                <input type="text" id="nickname" name="nickname" class="form-control"
                                       placeholder="姓名" minlength="1" maxlength="32" required
                                       th:value="${author} ? ${author.nickname}"/>
                            </div>

                            <div class="col-sm-4">
                                <label for="birthYear">出生年份：</label>
                                <input type="number" id="birthYear" name="birthYear" class="form-control"
                                       placeholder="出生年份" data-mask="9999-99-99" required
                                       min="1901" max="2037"
                                       th:value="${author} ? ${author.birthYear}"/>
                            </div>

                            <div class="col-sm-4">
                                <label for="birthPlace">籍贯：</label>
                                <input type="text" id="birthPlace" name="birthPlace" class="form-control"
                                       placeholder="籍贯" required
                                       th:value="${author} ? ${author.birthPlace}"/>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-sm-4">
                                <label for="gender">性别：</label>
                                <select id="gender" name="gender" class="form-control"
                                        th:value="${author} ? ${author.gender}">
                                    <option value="1">男</option>
                                    <option value="0">女</option>
                                </select>
                            </div>

                            <div class="col-sm-4">
                                <label for="education">学历：</label>
                                <select id="education" name="education" class="form-control"
                                        th:value="${author} ? ${author.education}">
                                    <option value="DOCTOR">博士</option>
                                    <option value="MASTER">硕士</option>
                                    <option value="BACHELOR">学士</option>
                                    <option value="OTHER">其它</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-sm-4">
                                <label for="telephone">手机：</label>
                                <input type="text" id="telephone" name="telephone" class="form-control"
                                       placeholder="手机号码" minlength="11" maxlength="11" required
                                       th:value="${author} ? ${author.telephone}"/>
                            </div>

                            <div class="col-sm-4">
                                <label for="email">邮箱：</label>
                                <input type="email" id="email" name="email" class="form-control"
                                       placeholder="个人邮箱（用于找回密码）" required
                                       th:value="${author} ? ${author.email}"/>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-sm-4">
                                <label for="company">单位：</label>
                                <input type="text" id="company" name="company" class="form-control"
                                       placeholder="工作单位"
                                       th:value="${author} ? ${author.company}"/>
                            </div>

                            <div class="col-sm-4">
                                <label for="job">职称：</label>
                                <input type="text" id="job" name="job" class="form-control"
                                       placeholder="职称"
                                       th:value="${author} ? ${author.job}"/>
                            </div>

                            <div class="col-sm-4">
                                <label for="duties">职务：</label>
                                <input type="text" id="duties" name="duties" class="form-control"
                                       placeholder="职务"
                                       th:value="${author} ? ${author.duties}"/>
                            </div>
                        </div>

                    </fieldset>

                    <fieldset title="登录信息">

                        <div class="form-group">
                            <div class="col-sm-4">
                                <label for="username">登录账号：</label>
                                <input type="text" id="username" name="username" class="form-control" placeholder="登录账号，长度介于6~16之间"
                                       required minlength="6" maxlength="16" th:value="${author} ? ${author.username}">
                            </div>

                            <div class="col-sm-4">
                                <label for="password">密码：</label>
                                <input type="password" id="password" name="password" class="form-control" placeholder="密码，长度介于6~16之间"
                                       required minlength="6" maxlength="16" th:value="${author} ? ${author.password}">
                            </div>

                            <div class="col-sm-4">
                                <label for="repeatPwd">确认密码：</label>
                                <input type="password" id="repeatPwd" name="repeatPwd" class="form-control" placeholder="请重复输入密码"
                                       required minlength="6" maxlength="16" th:value="${author} ? ${author.repeatPwd}">
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-sm-4">
                                <label for="validateCode">验证码：</label>
                                <input type="text" id="validateCode" name="validateCode" class="form-control" placeholder="验证码"
                                       required minlength="4" maxlength="4">
                            </div>
                            <div class="col-sm-4">
                                <p style="height: 18px;"></p>
                                <img src="/validateCode?_author" onclick="changeCode(this)">
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="text-center">
                                <div class="checkbox">
                                    <label>
                                        <input type="checkbox" id="agree" name="agree" value="agree" />
                                        我同意
                                        <a data-toggle="modal" href="#agreementModal">《著作者协议》</a>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="text-center">
                                <button id="authorSubmit" class="btn btn-lg btn-primary" type="submit">
                                    <span class="glyphicon glyphicon-saved" aria-hidden="true"></span>
                                    提交申请
                                </button>
                            </div>
                        </div>
                    </fieldset>
                </form>
            </div>
        </section>
    </div>

</div>

<!-- Modal -->
<div id="agreementModal" class="modal fade" aria-hidden="true"
     aria-labelledby="agreementModalLabel" role="dialog" tabindex="-1" >
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"
                        aria-hidden="true">&times;</button>
                <h4 class="modal-title">著作者协议</h4>
            </div>
            <div class="modal-body">
                <p>请认真阅读一下内容</p>
                <p>广东科技著作出版服务平台
                    为贯彻国家科技政策和出版方针，推动我省创新驱动发展战略实施，省科技厅2015年新增了广东科学技术学术专著项目。
                    申请的项目获得资助出版后两个月内向广东科技专著出版服务平台提供10本专著和电子版。广东科技专著平台若收集到这些数据，暂时还没有共享资源的平台，为了更好地整合、分析和共享这些数据，我平台将建立一个数据库进行管理。
                </p>
            </div>
        </div>
    </div>
</div>

<!-- Placed js at the end of the document so the pages load faster -->
<script src="/tools/bootstrap-3.3.7/js/bootstrap.js" type="text/javascript"></script>
<script src="/tools/jquery-validation-1.16.0/jquery.validate.min.js"></script>
<script src="/tools/jquery-validation-1.16.0/localization/messages_zh.js"></script>
<script src="/js/admin/myModal.js" type="text/javascript"></script>

<p class="msg-block" th:if="${errorMap}">
    <script th:if="${errorMap['msg']}" th:inline="javascript">
        /*<![CDATA[*/
        var msg = [[${errorMap['msg']}]] ;
        $(function () {
            myModalWarning(msg);
        });
        /*]]>*/
    </script>
</p>

<script type="text/javascript">
    function changeCode(img){
        $(img).attr("src","/validateCode?_" + new Date().getTime());
    }
    function isEmail(str) {
        var reg = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((.[a-zA-Z0-9_-]{2,3}){1,2})$/;
        return reg.test(str);
    }
    // 手机号码验证
    $.validator.addMethod("isMobile", function(value, element, params) {
        var length = value.length;
        var mobile = /^[1][34578][0-9]{9}$/;
        return this.optional(element) || (length == 11 && mobile.test(value));
    }, "请正确填写您的手机号码");

    $(function () {

        $('#authorForm').validate({
            rules: {
                nickname: "required",
                telephone : {
                    required : true,
                    minlength : 11,
                    isMobile : true
                },
                username: {
                    required: true,
                    minlength: 6
                },
                password: {
                    required: true,
                    minlength: 6
                },
                repeatPwd: {
                    required: true,
                    minlength: 6,
                    equalTo: "#password"
                },
                email: {
                    required: true,
                    email: true
                },
                agree: "required"
            },
            messages: {
                agree: "请接受这个协议",
                repeatPwd: {
                    required: "请输入确认密码",
                    minlength: "密码长度不能小于 6 个字母",
                    equalTo: "两次密码输入不一致"
                }
            },
            errorElement: "em",
            errorPlacement: function ( error, element ) {
                // Add the `help-block` class to the error element
                error.addClass( "help-block" );

                if ( element.prop( "type" ) === "checkbox" ) {
                    error.insertAfter( element.parent( "label" ) );
                } else {
                    error.insertAfter( element );
                }
            },
            highlight: function ( element, errorClass, validClass ) {
                $( element ).parents( ".col-sm-5" ).addClass( "has-error" ).removeClass( "has-success" );
            },
            unhighlight: function (element, errorClass, validClass) {
                $( element ).parents( ".col-sm-5" ).addClass( "has-success" ).removeClass( "has-error" );
            }
        });
    });
</script>
</body>
</html>
