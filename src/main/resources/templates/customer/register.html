<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Cherish">
    <title>会员申请</title>
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"/>

    <!--common-->
    <link href="/css/style.css" rel="stylesheet">
    <link href="/css/style-responsive.css" rel="stylesheet">

    <script src="/js/jquery-1.12.4.js" type="text/javascript"></script>
    <style>
        body{
            background-color: #fff;
        }
        .color_red{
            color: red;
        }
        .error{
            border: #e9151c;
        }
        .help-block{
            color: #e9151c;
        }
        #customerForm {
            margin: 0 50px;
        }
    </style>
</head>

<body>

<div class="container">
    <div style="height: 25px;"></div>

    <div class="row">
        <section class="panel">
            <header class="panel-heading">
                <div class="text-center">
                    <img src="/images/logo.png" alt="LOGO"/>
                </div>
            </header>
            <div class="panel-body">
                <h3 class="text-center">填写会员申请信息</h3>
                <br>
                <br>

                <form id="customerForm" class="form-horizontal "
                      action="/customer/register" method="post">
                    <!-- /*姓名、性别、出生年、电话、籍贯、单位、学历、职称、职务、邮箱*/ -->
                    <fieldset title="基本信息">

                        <div class="form-group">
                            <div class="col-sm-4">
                                <label for="nickname"><span class="color_red">* </span>呢称：</label>
                                <input type="text" id="nickname" name="nickname" class="form-control"
                                       placeholder="呢称" minlength="1" maxlength="32" required
                                       th:value="${customer} ? ${customer.nickname}"/>
                            </div>
                            <div class="col-sm-4">
                                <label for="study"><span class="color_red">* </span>研究领域：</label>
                                <input type="text" id="study" name="study" class="form-control"
                                       placeholder="研究领域" required
                                       th:value="${customer} ? ${customer.study}"/>
                            </div>
                            <div class="col-sm-4">
                                <label for="birthPlace"><span class="color_red">* </span>籍贯：</label>
                                <input type="text" id="birthPlace" name="birthPlace" class="form-control"
                                       placeholder="籍贯" required
                                       th:value="${customer} ? ${customer.birthPlace}"/>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-sm-4">
                                <label for="birthYear">出生年份：</label>
                                <input type="number" id="birthYear" name="birthYear" class="form-control"
                                       placeholder="出生年份" data-mask="9999-99-99"
                                       min="1901" max="2037"
                                       th:value="${customer} ? ${customer.birthYear}"/>
                            </div>
                            <div class="col-sm-4">
                                <label for="gender">性别：</label>
                                <select id="gender" name="gender" class="form-control"
                                        th:value="${customer} ? ${customer.gender}">
                                    <option value="男">男</option>
                                    <option value="女">女</option>
                                </select>
                            </div>
                            <div class="col-sm-4">
                                <label for="education">学历：</label>
                                <select id="education" name="education" class="form-control"
                                        th:value="${customer} ? ${customer.education}">
                                    <option value="DOCTOR">博士</option>
                                    <option value="MASTER">硕士</option>
                                    <option value="BACHELOR">学士</option>
                                    <option value="OTHER">其它</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-sm-4">
                                <label for="company">单位：</label>
                                <input type="text" id="company" name="company" class="form-control"
                                       placeholder="工作单位"
                                       th:value="${customer} ? ${customer.company}"/>
                            </div>

                            <div class="col-sm-4">
                                <label for="job">职称：</label>
                                <input type="text" id="job" name="job" class="form-control"
                                       placeholder="职称"
                                       th:value="${customer} ? ${customer.job}"/>
                            </div>

                            <div class="col-sm-4">
                                <label for="duties">职务：</label>
                                <input type="text" id="duties" name="duties" class="form-control"
                                       placeholder="职务"
                                       th:value="${customer} ? ${customer.duties}"/>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-sm-4">
                                <label for="telephone"><span class="color_red">* </span>手机：</label>
                                <input type="text" id="telephone" name="telephone" class="form-control"
                                       placeholder="手机号码" minlength="11" maxlength="11" required
                                       th:value="${customer} ? ${customer.telephone}"/>
                            </div>

                            <div class="col-sm-4">
                                <label for="email"><span class="color_red">* </span>邮箱：</label>
                                <input type="email" id="email" name="email" class="form-control"
                                       placeholder="个人邮箱（用于找回密码）" required
                                       th:value="${customer} ? ${customer.email}"/>
                            </div>
                        </div>

                    </fieldset>

                    <fieldset title="登录信息">

                        <div class="form-group">
                            <div class="col-sm-4">
                                <label for="username"><span class="color_red">* </span>登录账号：</label>
                                <input type="text" id="username" name="username" class="form-control" placeholder="登录账号，长度介于6~16之间"
                                       required minlength="6" maxlength="16" th:value="${customer} ? ${customer.username}">
                            </div>

                            <div class="col-sm-4">
                                <label for="password"><span class="color_red">* </span>密码：</label>
                                <input type="password" id="password" name="password" class="form-control" placeholder="密码，长度介于6~16之间"
                                       required minlength="6" maxlength="16" th:value="${customer} ? ${customer.password}">
                            </div>

                            <div class="col-sm-4">
                                <label for="repeatPwd"><span class="color_red">* </span>确认密码：</label>
                                <input type="password" id="repeatPwd" name="repeatPwd" class="form-control" placeholder="请重复输入密码"
                                       required minlength="6" maxlength="16" th:value="${customer} ? ${customer.repeatPwd}">
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-sm-4">
                                <label for="validateCode"><span class="color_red">* </span>验证码：</label>
                                <input type="text" id="validateCode" name="validateCode" class="form-control" placeholder="验证码"
                                       required minlength="4" maxlength="4">
                            </div>
                            <div class="col-sm-4">
                                <p style="height: 18px;"></p>
                                <img src="/validateCode?_customer" onclick="changeCode(this)">
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="text-center">
                                <div class="checkbox">
                                    <label>
                                        <input type="checkbox" id="agree" name="agree" value="agree" />
                                        我同意
                                        <a data-toggle="modal" href="#agreementModal">《广东科技著作出版服务平台会员注册协议》</a>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="text-center">
                                <button id="customerSubmit" class="btn btn-lg btn-primary" type="submit">
                                    <span class="glyphicon glyphicon-saved" aria-hidden="true"></span>
                                    提交申请
                                </button>
                            </div>
                        </div>
                    </fieldset>
                </form>
            </div>
        </section>
    </div>

</div>

<!-- Modal -->
<div id="agreementModal" class="modal fade" aria-hidden="true"
     aria-labelledby="agreementModalLabel" role="dialog" tabindex="-1" >
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"
                        aria-hidden="true">&times;</button>
                <h6 class="modal-title">广东科技著作出版服务平台会员注册协议</h6>
            </div>
            <div class="modal-body">
                <h4 class="text-center">广东科技专著出版服务平台会员注册协议</h4>
                <p>
                    <strong>1  总则</strong><br/>
                    1.1广东科技专著出版服务平台（以下简称“专著平台”）的所有权和运营权归广东省科学学与科技管理研究会。<br/>
                    1.2 会员在注册之前，应当仔细阅读本协议，并同意遵守本协议后方可成为注册会员。一旦注册成功，则视为对本服务全部条款的认知和接受，会员与专著平台之间自动形成协议关系，会员应当受本协议的约束。<br/>
                    1.3 本协议可由专著平台随时更新，会员应当及时关注并同意本站不承担通知义务。本站的通知、公告、声明或其他类似内容是本协议的一部分。<br/>
                    <strong>2   服务内容</strong><br/>
                    2.1 专著平台的具体内容由本站根据实际情况提供。<br/>
                    2.2 本站仅提供相关的数据服务，除此之外与相关网络服务有关的设备(如个人电脑、手机、及其他与接入互联网或移动网有关的装置)及所需的费用均应由会员自行负担。<br/>
                    <strong>3   会员帐号</strong><br/>
                    3.1 经本站注册系统完成注册程序并通过身份认证的会员即成为正式会员，可以获得本站规定会员所应享有的一切权限；未经认证仅享有本站规定的部分会员权限。专著平台有权对会员的权限设计进行变更。<br/>
                    3.2 会员只能按照注册要求使用真实姓名及身份证号注册。会员有义务保证密码和帐号的安全，会员利用该密码和帐号所进行的一切活动引起的任何损失或损害由会员自行承担全部责任，本站不承担任何责任。如会员发现帐号遭到未授权的使用或发生其他任何安全问题，应立即修改帐号密码并妥善保管，如有必要，请通知本站。因黑客行为或会员的保管疏忽导致帐号非法使用，本站不承担任何责任。<br/>
                    <strong>4  使用规则</strong><br/>
                    4.1 遵守中华人民共和国相关法律法规，包括但不限于《中华人民共和国计算机信息系统安全保护条例》、《计算机软件保护条例》、《最高人民法院关于审理涉及计算机网络著作权纠纷案件适用法律若干问题的解释(法释[2004]1号)》、《全国人大常委会关于维护互联网安全的决定》、《互联网电子公告服务管理规定》、《互联网新闻信息服务管理规定》、《互联网著作权行政保护办法》和《信息网络传播权保护条例》等有关计算机互联网规定和知识产权的法律和法规、实施办法。<br/>
                    4.2所有会员不得在本站任何页面转载、传送含有下列内容之一的信息，否则本站有权自行处理并不通知会员：<br/>
                    (1)违反宪法确定的基本原则的；<br/>
                    (2)危害国家安全，泄漏国家机密，颠覆国家政权，破坏国家统一的；<br/>
                    (3)损害国家荣誉和利益的；<br/>
                    (4)煽动民族仇恨、民族歧视，破坏民族团结的；<br/>
                    (5)破坏国家宗教政策，宣扬邪教和封建迷信的；<br/>
                    (6)散布谣言，扰乱社会秩序，破坏社会稳定的；<br/>
                    (7)散布淫秽、色情、赌博、暴力、恐怖或者教唆犯罪的；<br/>
                    (8)侮辱或者诽谤他人，侵害他人合法权益的；<br/>
                    (9)煽动非法集会、结社、游行、示威、聚众扰乱社会秩序的；<br/>
                    (10)以非法民间组织名义活动的；<br/>
                    (11)含有法律、行政法规禁止的其他内容的。<br/>

                    4.3当第三方认为会员发表或者上传于本站的信息侵犯其权利，并根据《信息网络传播权保护条例》或者相关法律规定向本站发送权利通知书时，会员同意本站可以自行判断决定删除涉嫌侵权信息，除非会员提交书面证据材料排除侵权的可能性，本站将不会自动恢复上述删除的信息； (1)不得为任何非法目的而使用网络服务系统；(2)遵守所有与网络服务有关的网络协议、规定和程序； (3)不得利用本站进行任何可能对互联网的正常运转造成不利影响的行为； (4)不得利用本站进行任何不利于本站的行为。<br/>
                    4.4 如会员在使用网络服务时违反上述任何规定，本站有权要求会员改正或直接采取一切必要的措施(包括但不限于删除会员张贴的内容、暂停或终止会员使用网络服务的权利)以减轻会员不当行为而造成的影响。<br/>
                    <strong>5  隐私保护</strong><br/>
                    5.1 本站不对外公开或向第三方提供单个会员的注册资料及会员在使用网络服务时存储在本站的非公开内容，但下列情况除外：<br/>
                    (1)事先获得会员的明确授权；<br/>
                    (2)根据有关的法律法规要求；<br/>
                    (3)按照相关政府主管部门的要求；<br/>
                    (4)为维护社会公众的利益。<br/>
                    5.2 本站可能会与第三方合作向会员提供相关的网络服务，在此情况下，如该第三方同意承担与本站同等的保护会员隐私的责任，则本站有权将会员的注册资料等提供给该第三方。<br/>
                    5.3 在不透露单个会员隐私资料的前提下，本站有权对整个会员数据库进行分析并对会员数据库进行商业上的利用。<br/>
                    <strong>6   版权声明</strong><br/>
                    6.1 本站的文字、图片、音频、视频等版权均归广东省科学学与科技管理研究会享有或与作者共同享有，未经本站许可，不得任意转载。<br/>
                    6.2 本站特有的标识、版面设计、编排方式等版权均属广东省科学学与科技管理研究会享有，未经本站许可，不得任意复制或转载。<br/>
                    6.3 使用本站的任何内容均应注明“来源于广东省科学学与科技管理研究会”及署上作者姓名，按法律规定需要支付稿酬的，应当通知本站及作者及支付稿酬，并独立承担一切法律责任。<br/>
                    6.4 本站享有所有作品用于其它用途的优先权，包括但不限于网站、电子杂志、平面出版等，但在使用前会通知作者，并按同行业的标准支付稿酬。<br/>
                    6.5 本站所有内容仅代表作者自己的立场和观点，与本站无关，由作者本人承担一切法律责任。<br/>
                    6.6 恶意转载本站内容的，本站保留将其诉诸法律的权利。<br/>
                    <strong>7  责任声明</strong><br/>
                    7.1 会员明确同意其使用本站网络服务所存在的风险及一切后果将完全由会员本人承担，保宝网对此不承担任何责任。<br/>
                    7.2 本站无法保证网络服务一定能满足会员的要求，也不保证网络服务的及时性、安全性、准确性。<br/>
                    7.3 本站不保证为方便会员而设置的外部链接的准确性和完整性，同时，对于该等外部链接指向的不由本站实际控制的任何网页上的内容，本站不承担任何责任。<br/>
                    7.4 对于因不可抗力或本站不能控制的原因造成的网络服务中断或其它缺陷，本站不承担任何责任，但将尽力减少因此而给会员造成的损失和影响。<br/>
                    7.5 对于站向会员提供的下列产品或者服务的质量缺陷本身及其引发的任何损失，本站无需承担任何责任：(1)本站向会员免费提供的各项网络服务；(2)本站向会员赠送的任何产品或者服务。<br/>
                    7.6 本站有权于任何时间暂时或永久修改或终止本服务(或其任何部分)，而无论其通知与否，本站对会员和任何第三人均无需承担任何责任。<br/>
                    <strong>8  附则</strong><br/>
                    8.1 本协议的订立、执行和解释及争议的解决均应适用中华人民共和国法律。<br/>
                    8.2 如本协议中的任何条款无论因何种原因完全或部分无效或不具有执行力，本协议的其余条款仍应有效并且有约束力。<br/>
                    8.3 本协议解释权及修订权归广东省科学学与科技管理研究会所有。<br/>

                </p>

                <p></p>
                <p></p>
                <p class="text-center">
                    <button type="button" class="agree btn btn-primary" data-dismiss="modal">同意</button>
                </p>
            </div>
        </div>
    </div>
</div>

<!-- Placed js at the end of the document so the pages load faster -->
<script src="/tools/bootstrap-3.3.7/js/bootstrap.js" type="text/javascript"></script>
<script src="/tools/jquery-validation-1.16.0/jquery.validate.min.js"></script>
<script src="/tools/jquery-validation-1.16.0/localization/messages_zh.js"></script>
<script src="/js/myModal.js" type="text/javascript"></script>

<p class="msg-block" th:if="${errorMap}">
    <script th:if="${errorMap['msg']}" th:inline="javascript">
        /*<![CDATA[*/
        var msg = [[${errorMap['msg']}]] ;
        $(function () {
            myModalWarning(msg);
        });
        /*]]>*/
    </script>
</p>

<script type="text/javascript">
    function changeCode(img){
        $(img).attr("src","/validateCode?_" + new Date().getTime());
    }
    function isEmail(str) {
        var reg = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((.[a-zA-Z0-9_-]{2,3}){1,2})$/;
        return reg.test(str);
    }
    // 手机号码验证
    $.validator.addMethod("isMobile", function(value, element, params) {
        var length = value.length;
        var mobile = /^[1][34578][0-9]{9}$/;
        return this.optional(element) || (length === 11 && mobile.test(value));
    }, "请正确填写您的手机号码");

    $(function () {
        $(".modal").on("click", ".agree", function () {
            $("#agree").attr("checked", true);
        });

        $('#customerForm').validate({
            rules: {
                nickname: "required",
                telephone : {
                    required : true,
                    minlength : 11,
                    isMobile : true
                },
                username: {
                    required: true,
                    minlength: 6
                },
                password: {
                    required: true,
                    minlength: 6
                },
                repeatPwd: {
                    required: true,
                    minlength: 6,
                    equalTo: "#password"
                },
                email: {
                    required: true,
                    email: true
                },
                agree: "required"
            },
            messages: {
                agree: "请接受这个协议",
                repeatPwd: {
                    required: "请输入确认密码",
                    minlength: "密码长度不能小于 6 个字母",
                    equalTo: "两次密码输入不一致"
                }
            },
            errorElement: "em",
            errorPlacement: function ( error, element ) {
                // Add the `help-block` class to the error element
                error.addClass( "help-block" );

                if ( element.prop( "type" ) === "checkbox" ) {
                    error.insertAfter( element.parent( "label" ) );
                } else {
                    error.insertAfter( element );
                }
            },
            highlight: function ( element, errorClass, validClass ) {
                $( element ).parents( ".col-sm-5" ).addClass( "has-error" ).removeClass( "has-success" );
            },
            unhighlight: function (element, errorClass, validClass) {
                $( element ).parents( ".col-sm-5" ).addClass( "has-success" ).removeClass( "has-error" );
            }
        });
    });
</script>
</body>
</html>
